!function(c,a){function b(e,d){this.$element=e;this.options=a.extend({},b.defaults,d);this.rules=[];this.currentPath="";this._init();this._events();c.registerPlugin(this,"Interchange")}b.defaults={rules:null};b.SPECIAL_QUERIES={landscape:"screen and (orientation: landscape)",portrait:"screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"};b.prototype._init=function(){this._addBreakpoints();this._generateRules();this._reflow()};b.prototype._events=function(){a(window).on("resize.zf.interchange",c.util.throttle(this._reflow.bind(this),50))};b.prototype._reflow=function(){var d;for(var e in this.rules){var f=this.rules[e];if(window.matchMedia(f.query).matches){d=f}}if(d){this.replace(d.path)}};b.prototype._addBreakpoints=function(){for(var d in c.MediaQuery.queries){var e=c.MediaQuery.queries[d];b.SPECIAL_QUERIES[e.name]=e.value}};b.prototype._generateRules=function(){var j=[];var h;if(this.options.rules){h=this.options.rules}else{h=this.$element.data("interchange").match(/\[.*?\]/g)}for(var d in h){var g=h[d].slice(1,-1).split(", ");var f=g.slice(0,-1).join("");var e=g[g.length-1];if(b.SPECIAL_QUERIES[e]){e=b.SPECIAL_QUERIES[e]}j.push({path:f,query:e})}this.rules=j};b.prototype.replace=function(d){if(this.currentPath===d){return}var e=this;if(this.$element[0].nodeName==="IMG"){this.$element.attr("src",d).load(function(){e.currentPath=d})}else{if(d.match(/\.(gif|jpg|jpeg|tiff|png)([?#].*)?/i)){this.$element.css({"background-image":"url("+d+")"})}else{a.get(d,function(f){e.$element.html(f);a(f).foundation();e.currentPath=d})}}this.$element.trigger("replaced.zf.interchange")};b.prototype.destroy=function(){};c.plugin(b,"Interchange");if(typeof module!=="undefined"&&typeof module.exports!=="undefined"){module.exports=b}if(typeof define==="function"){define(["foundation"],function(){return b})}}(Foundation,jQuery);
